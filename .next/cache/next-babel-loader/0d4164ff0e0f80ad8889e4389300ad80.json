{"ast":null,"code":"import \"antd/lib/skeleton/style/css\";\nimport _Skeleton from \"antd/lib/skeleton\";\nimport \"antd/lib/list/style/css\";\nimport _List from \"antd/lib/list\";\nimport \"antd/lib/avatar/style/css\";\nimport _Avatar from \"antd/lib/avatar\";\nimport \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/wangning/Desktop/ssr-juejin-next/components/LoadMoreList.js\";\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\n\nvar LoadMoreList = function LoadMoreList(props) {\n  var _useState = useState(true),\n      initLoading = _useState[0],\n      setInitLoading = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(props.gold && props.gold.goldList || []),\n      data = _useState3[0],\n      setData = _useState3[1];\n\n  var _useState4 = useState(props.gold && props.gold.goldList || []),\n      list = _useState4[0],\n      setList = _useState4[1];\n\n  useEffect(function () {\n    if (props.csr) {\n      props.refreshGoldList();\n    } else {\n      setInitLoading(true);\n    }\n\n    return function () {// clean func\n    };\n  }, []);\n\n  onLoadMore = function onLoadMore() {\n    return _regeneratorRuntime.async(function onLoadMore$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            setList(_this.state.data.concat(_toConsumableArray(new Array(props.gold.limit)).map(function () {\n              return {\n                loading: true,\n                name: {}\n              };\n            })));\n            props.updateGoldConds({\n              \"offset\": ++props.offset\n            });\n            props.refreshGoldList();\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  return __jsx(_List, {\n    className: \"demo-loadmore-list\",\n    loading: initLoading,\n    itemLayout: \"horizontal\",\n    loadMore: !initLoading && !loading ? __jsx(\"div\", {\n      style: {\n        textAlign: 'center',\n        marginTop: 12,\n        height: 32,\n        lineHeight: '32px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }, __jsx(_Button, {\n      onClick: _this.onLoadMore,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, \"loading more\")) : null,\n    dataSource: list,\n    renderItem: function renderItem(item) {\n      return __jsx(_List.Item, {\n        actions: [__jsx(\"a\", {\n          key: \"list-loadmore-edit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, \"edit\"), __jsx(\"a\", {\n          key: \"list-loadmore-more\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, \"more\")],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, __jsx(_Skeleton, {\n        avatar: true,\n        title: false,\n        loading: item.loading,\n        active: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, __jsx(_List.Item.Meta, {\n        avatar: __jsx(_Avatar, {\n          src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }),\n        title: __jsx(\"a\", {\n          href: \"https://ant.design\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, item.name.last),\n        description: \"Ant Design, a design language for background applications, is refined by Ant UED Team\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }), __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"content\")));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  });\n};\n\nexport default LoadMoreList;","map":{"version":3,"sources":["/Users/wangning/Desktop/ssr-juejin-next/components/LoadMoreList.js"],"names":["React","useEffect","useState","LoadMoreList","props","initLoading","setInitLoading","loading","setLoading","gold","goldList","data","setData","list","setList","csr","refreshGoldList","onLoadMore","state","concat","Array","limit","map","name","updateGoldConds","offset","textAlign","marginTop","height","lineHeight","item","last"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { List, Avatar, Button, Skeleton } from 'antd';\n\nconst LoadMoreList = props => {\n  const [ initLoading, setInitLoading] = useState(true);\n  const [ loading, setLoading ] = useState(false);\n  const [ data, setData ] = useState(props.gold && props.gold.goldList || []);\n  const [ list, setList ] = useState(props.gold && props.gold.goldList || []);\n\n  useEffect(() => {\n    if(props.csr){\n      props.refreshGoldList();\n    }else{\n      setInitLoading(true)\n    }\n    return () => {\n      // clean func\n    };\n  }, []);\n\n  onLoadMore = async() => {\n    setLoading(true);\n    setList(this.state.data.concat([...new Array(props.gold.limit)].map(() => ({ loading: true, name: {} }))));\n    props.updateGoldConds({\"offset\": ++props.offset});\n    props.refreshGoldList();\n  };\n\n  return (\n    <List\n      className=\"demo-loadmore-list\"\n      loading={initLoading}\n      itemLayout=\"horizontal\"\n      loadMore={\n        !initLoading && !loading ? (\n          <div\n            style={{\n              textAlign: 'center',\n              marginTop: 12,\n              height: 32,\n              lineHeight: '32px',\n            }}\n          >\n            <Button onClick={this.onLoadMore}>loading more</Button>\n          </div>\n        ) : null\n      }\n      dataSource={list}\n      renderItem={item => (\n        <List.Item\n          actions={[<a key=\"list-loadmore-edit\">edit</a>, <a key=\"list-loadmore-more\">more</a>]}\n        >\n          <Skeleton avatar title={false} loading={item.loading} active>\n            <List.Item.Meta\n              avatar={\n                <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n              }\n              title={<a href=\"https://ant.design\">{item.name.last}</a>}\n              description=\"Ant Design, a design language for background applications, is refined by Ant UED Team\"\n            />\n            <div>content</div>\n          </Skeleton>\n        </List.Item>\n      )}\n    />\n  );\n}\n\nexport default LoadMoreList"]},"metadata":{},"sourceType":"module"}